{"ast":null,"code":"import _classCallCheck from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import SearchResults from\"./Search-result\";import axios from\"axios\";import SearchMovie from\"./Search-movie\";import{Link}from\"react-router-dom\";import ReactLoading from\"react-loading\";var server=\"https://rizkyport.herokuapp.com/api\";var SearchPage=/*#__PURE__*/function(_React$Component){_inherits(SearchPage,_React$Component);var _super=_createSuper(SearchPage);function SearchPage(props){var _this;_classCallCheck(this,SearchPage);_this=_super.call(this,props);_this.displaySearchResult=function(){if(!_this.state.searchResult.Search){return/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"h5\",null,_this.state.searchResult.Error));}else{return _this.state.searchResult.Search.map(function(movie,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\",key:index},/*#__PURE__*/React.createElement(SearchResults,{movie:movie,server:_this.props.location.server}));});}};_this.updateSearchResult=function(result){_this.setState({searchResult:result});};_this.pageButton=function(){var pageMax;var pageNow=parseInt(_this.props.match.params.page);var i=pageNow;var arr=[];var totalResult=_this.state.searchResult.totalResults;if(totalResult%10===0){pageMax=Math.floor(totalResult/10);}else{pageMax=Math.floor(totalResult/10)+1;}for(i=pageNow-3;i<=pageNow+3;i++){if(i>0&&i<=pageMax){arr.push(i);}}return arr.map(function(page,index){if(page===parseInt(_this.props.match.params.page)){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"page-item active\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-link\"},page));}else{return/*#__PURE__*/React.createElement(Link,{key:index,to:\"/search-movie/\".concat(_this.props.match.params.keyword,\"/\").concat(page)},/*#__PURE__*/React.createElement(\"div\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-link\"},page)));}});};_this.state={searchResult:[],totalPage:\"\",isLoading:true};return _this;}_createClass(SearchPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"\".concat(server,\"/searchmovie/\").concat(this.props.match.params.keyword,\"/\").concat(this.props.match.params.page)).then(function(res){_this2.setState({searchResult:res.data,isLoading:false});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this3=this;if(prevProps.match.params.keyword!==this.props.match.params.keyword||prevProps.match.params.page!==this.props.match.params.page){this.setState({isLoading:true});axios.get(\"\".concat(server,\"/searchmovie/\").concat(this.props.match.params.keyword,\"/\").concat(this.props.match.params.page)).then(function(res){_this3.setState({searchResult:res.data,isLoading:false});});window.scrollTo(0,0);}}},{key:\"isLoading\",value:function isLoading(){if(this.state.isLoading){return/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\",align:\"center\"},/*#__PURE__*/React.createElement(ReactLoading,{type:\"bars\",color:\"#1AC8DB\",height:420,width:300}));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"row flex-md-wrap mx-auto justify-content-center\"},/*#__PURE__*/React.createElement(this.displaySearchResult,null));}}},{key:\"render\",value:function render(){var pageMax;var totalResult=this.state.searchResult.totalResults;if(totalResult%10===0){pageMax=Math.floor(totalResult/10);}else{pageMax=Math.floor(totalResult/10)+1;}return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(SearchMovie,{updateResult:this.updateSearchResult,server:server}),/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},this.isLoading(),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center mt-5\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"pagination\"},/*#__PURE__*/React.createElement(Link,{to:\"/search-movie/\".concat(this.props.match.params.keyword,\"/1\")},/*#__PURE__*/React.createElement(\"div\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-link\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xAB\"),/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Previous\")))),this.pageButton(),/*#__PURE__*/React.createElement(Link,{to:\"/search-movie/\".concat(this.props.match.params.keyword,\"/\").concat(pageMax)},/*#__PURE__*/React.createElement(\"div\",{className:\"page-item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"page-link\"},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xBB\"),/*#__PURE__*/React.createElement(\"span\",{className:\"sr-only\"},\"Next\"))))))));}}]);return SearchPage;}(React.Component);export{SearchPage as default};","map":{"version":3,"sources":["E:/portfolio2/client/src/components/explore-component/Search-page.js"],"names":["React","SearchResults","axios","SearchMovie","Link","ReactLoading","server","SearchPage","props","displaySearchResult","state","searchResult","Search","Error","map","movie","index","location","updateSearchResult","result","setState","pageButton","pageMax","pageNow","parseInt","match","params","page","i","arr","totalResult","totalResults","Math","floor","push","keyword","totalPage","isLoading","get","then","res","data","prevProps","window","scrollTo","Component"],"mappings":"wjBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gBAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,YAAP,KAAyB,eAAzB,CAEA,GAAMC,CAAAA,MAAM,CAAG,qCAAf,C,GACqBC,CAAAA,U,oHACnB,oBAAYC,KAAZ,CAAmB,4CACjB,uBAAMA,KAAN,EADiB,MAsDnBC,mBAtDmB,CAsDG,UAAM,CAC1B,GAAI,CAAC,MAAKC,KAAL,CAAWC,YAAX,CAAwBC,MAA7B,CAAqC,CACnC,mBACE,2BAAK,SAAS,CAAC,MAAf,eACE,8BAAK,MAAKF,KAAL,CAAWC,YAAX,CAAwBE,KAA7B,CADF,CADF,CAKD,CAND,IAMO,CACL,MAAO,OAAKH,KAAL,CAAWC,YAAX,CAAwBC,MAAxB,CAA+BE,GAA/B,CAAmC,SAACC,KAAD,CAAQC,KAAR,CAAkB,CAC1D,mBACE,2BAAK,SAAS,CAAC,MAAf,CAAsB,GAAG,CAAEA,KAA3B,eACE,oBAAC,aAAD,EAAe,KAAK,CAAED,KAAtB,CAA6B,MAAM,CAAE,MAAKP,KAAL,CAAWS,QAAX,CAAoBX,MAAzD,EADF,CADF,CAKD,CANM,CAAP,CAOD,CACF,CAtEkB,OAwEnBY,kBAxEmB,CAwEE,SAACC,MAAD,CAAY,CAC/B,MAAKC,QAAL,CAAc,CAAET,YAAY,CAAEQ,MAAhB,CAAd,EACD,CA1EkB,OA4EnBE,UA5EmB,CA4EN,UAAM,CACjB,GAAIC,CAAAA,OAAJ,CACA,GAAIC,CAAAA,OAAO,CAAGC,QAAQ,CAAC,MAAKhB,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBC,IAAzB,CAAtB,CACA,GAAIC,CAAAA,CAAC,CAAGL,OAAR,CACA,GAAIM,CAAAA,GAAG,CAAG,EAAV,CACA,GAAMC,CAAAA,WAAW,CAAG,MAAKpB,KAAL,CAAWC,YAAX,CAAwBoB,YAA5C,CACA,GAAID,WAAW,CAAG,EAAd,GAAqB,CAAzB,CAA4B,CAC1BR,OAAO,CAAGU,IAAI,CAACC,KAAL,CAAWH,WAAW,CAAG,EAAzB,CAAV,CACD,CAFD,IAEO,CACLR,OAAO,CAAGU,IAAI,CAACC,KAAL,CAAWH,WAAW,CAAG,EAAzB,EAA+B,CAAzC,CACD,CAED,IAAKF,CAAC,CAAGL,OAAO,CAAG,CAAnB,CAAsBK,CAAC,EAAIL,OAAO,CAAG,CAArC,CAAwCK,CAAC,EAAzC,CAA6C,CAC3C,GAAIA,CAAC,CAAG,CAAJ,EAASA,CAAC,EAAIN,OAAlB,CAA2B,CACzBO,GAAG,CAACK,IAAJ,CAASN,CAAT,EACD,CACF,CAED,MAAOC,CAAAA,GAAG,CAACf,GAAJ,CAAQ,SAACa,IAAD,CAAOX,KAAP,CAAiB,CAC9B,GAAIW,IAAI,GAAKH,QAAQ,CAAC,MAAKhB,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBC,IAAzB,CAArB,CAAqD,CACnD,mBACE,2BAAK,GAAG,CAAEX,KAAV,CAAiB,SAAS,CAAC,kBAA3B,eACE,2BAAK,SAAS,CAAC,WAAf,EAA4BW,IAA5B,CADF,CADF,CAKD,CAND,IAMO,CACL,mBACE,oBAAC,IAAD,EACE,GAAG,CAAEX,KADP,CAEE,EAAE,yBAAmB,MAAKR,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBS,OAA3C,aAAsDR,IAAtD,CAFJ,eAIE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,WAAf,EAA4BA,IAA5B,CADF,CAJF,CADF,CAUD,CACF,CAnBM,CAAP,CAoBD,CAlHkB,CAGjB,MAAKjB,KAAL,CAAa,CACXC,YAAY,CAAE,EADH,CAEXyB,SAAS,CAAE,EAFA,CAGXC,SAAS,CAAE,IAHA,CAAb,CAHiB,aAQlB,C,oFAEmB,iBAClBnC,KAAK,CACFoC,GADH,WAEOhC,MAFP,yBAE6B,KAAKE,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBS,OAFrD,aAEgE,KAAK3B,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBC,IAFxF,GAIGY,IAJH,CAIQ,SAACC,GAAD,CAAS,CACb,MAAI,CAACpB,QAAL,CAAc,CAAET,YAAY,CAAE6B,GAAG,CAACC,IAApB,CAA0BJ,SAAS,CAAE,KAArC,CAAd,EACD,CANH,EAOD,C,8DAEkBK,S,CAAW,iBAC5B,GACEA,SAAS,CAACjB,KAAV,CAAgBC,MAAhB,CAAuBS,OAAvB,GAAmC,KAAK3B,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBS,OAA3D,EACAO,SAAS,CAACjB,KAAV,CAAgBC,MAAhB,CAAuBC,IAAvB,GAAgC,KAAKnB,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBC,IAF1D,CAGE,CACA,KAAKP,QAAL,CAAc,CAAEiB,SAAS,CAAE,IAAb,CAAd,EACAnC,KAAK,CACFoC,GADH,WAEOhC,MAFP,yBAE6B,KAAKE,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBS,OAFrD,aAEgE,KAAK3B,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBC,IAFxF,GAIGY,IAJH,CAIQ,SAACC,GAAD,CAAS,CACb,MAAI,CAACpB,QAAL,CAAc,CAAET,YAAY,CAAE6B,GAAG,CAACC,IAApB,CAA0BJ,SAAS,CAAE,KAArC,CAAd,EACD,CANH,EAQAM,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACD,CACF,C,6CAEW,CACV,GAAI,KAAKlC,KAAL,CAAW2B,SAAf,CAA0B,CACxB,mBACE,2BAAK,SAAS,CAAC,MAAf,CAAsB,KAAK,CAAC,QAA5B,eACE,oBAAC,YAAD,EAAc,IAAI,CAAC,MAAnB,CAA0B,KAAK,CAAC,SAAhC,CAA0C,MAAM,CAAE,GAAlD,CAAuD,KAAK,CAAE,GAA9D,EADF,CADF,CAKD,CAND,IAMO,CACL,mBACE,2BAAK,SAAS,CAAC,iDAAf,eACE,yBAAM,mBAAN,MADF,CADF,CAKD,CACF,C,uCAgEQ,CACP,GAAIf,CAAAA,OAAJ,CACA,GAAMQ,CAAAA,WAAW,CAAG,KAAKpB,KAAL,CAAWC,YAAX,CAAwBoB,YAA5C,CACA,GAAID,WAAW,CAAG,EAAd,GAAqB,CAAzB,CAA4B,CAC1BR,OAAO,CAAGU,IAAI,CAACC,KAAL,CAAWH,WAAW,CAAG,EAAzB,CAAV,CACD,CAFD,IAEO,CACLR,OAAO,CAAGU,IAAI,CAACC,KAAL,CAAWH,WAAW,CAAG,EAAzB,EAA+B,CAAzC,CACD,CAED,mBACE,qDACE,oBAAC,WAAD,EAAa,YAAY,CAAE,KAAKZ,kBAAhC,CAAoD,MAAM,CAAEZ,MAA5D,EADF,cAEE,2BAAK,SAAS,CAAC,iBAAf,EACG,KAAK+B,SAAL,EADH,cAGE,2BAAK,SAAS,CAAC,oCAAf,eACE,0BAAI,SAAS,CAAC,YAAd,eACE,oBAAC,IAAD,EAAM,EAAE,yBAAmB,KAAK7B,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBS,OAA3C,MAAR,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,4BAAM,cAAY,MAAlB,SADF,cAEE,4BAAM,SAAS,CAAC,SAAhB,aAFF,CADF,CADF,CADF,CASG,KAAKd,UAAL,EATH,cAUE,oBAAC,IAAD,EACE,EAAE,yBAAmB,KAAKb,KAAL,CAAWiB,KAAX,CAAiBC,MAAjB,CAAwBS,OAA3C,aAAsDb,OAAtD,CADJ,eAGE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,4BAAM,cAAY,MAAlB,SADF,cAEE,4BAAM,SAAS,CAAC,SAAhB,SAFF,CADF,CAHF,CAVF,CADF,CAHF,CAFF,CADF,CAgCD,C,wBA9JqCtB,KAAK,CAAC6C,S,SAAzBtC,U","sourcesContent":["import React from \"react\";\r\nimport SearchResults from \"./Search-result\";\r\nimport axios from \"axios\";\r\nimport SearchMovie from \"./Search-movie\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ReactLoading from \"react-loading\";\r\n\r\nconst server = \"https://rizkyport.herokuapp.com/api\";\r\nexport default class SearchPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      searchResult: [],\r\n      totalPage: \"\",\r\n      isLoading: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\r\n        `${server}/searchmovie/${this.props.match.params.keyword}/${this.props.match.params.page}`\r\n      )\r\n      .then((res) => {\r\n        this.setState({ searchResult: res.data, isLoading: false });\r\n      });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.match.params.keyword !== this.props.match.params.keyword ||\r\n      prevProps.match.params.page !== this.props.match.params.page\r\n    ) {\r\n      this.setState({ isLoading: true });\r\n      axios\r\n        .get(\r\n          `${server}/searchmovie/${this.props.match.params.keyword}/${this.props.match.params.page}`\r\n        )\r\n        .then((res) => {\r\n          this.setState({ searchResult: res.data, isLoading: false });\r\n        });\r\n\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }\r\n\r\n  isLoading() {\r\n    if (this.state.isLoading) {\r\n      return (\r\n        <div className=\"mt-5\" align=\"center\">\r\n          <ReactLoading type=\"bars\" color=\"#1AC8DB\" height={420} width={300} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div className=\"row flex-md-wrap mx-auto justify-content-center\">\r\n          <this.displaySearchResult />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  displaySearchResult = () => {\r\n    if (!this.state.searchResult.Search) {\r\n      return (\r\n        <div className=\"mt-5\">\r\n          <h5>{this.state.searchResult.Error}</h5>\r\n        </div>\r\n      );\r\n    } else {\r\n      return this.state.searchResult.Search.map((movie, index) => {\r\n        return (\r\n          <div className=\"mt-3\" key={index}>\r\n            <SearchResults movie={movie} server={this.props.location.server} />\r\n          </div>\r\n        );\r\n      });\r\n    }\r\n  };\r\n\r\n  updateSearchResult = (result) => {\r\n    this.setState({ searchResult: result });\r\n  };\r\n\r\n  pageButton = () => {\r\n    let pageMax;\r\n    let pageNow = parseInt(this.props.match.params.page);\r\n    let i = pageNow;\r\n    let arr = [];\r\n    const totalResult = this.state.searchResult.totalResults;\r\n    if (totalResult % 10 === 0) {\r\n      pageMax = Math.floor(totalResult / 10);\r\n    } else {\r\n      pageMax = Math.floor(totalResult / 10) + 1;\r\n    }\r\n\r\n    for (i = pageNow - 3; i <= pageNow + 3; i++) {\r\n      if (i > 0 && i <= pageMax) {\r\n        arr.push(i);\r\n      }\r\n    }\r\n\r\n    return arr.map((page, index) => {\r\n      if (page === parseInt(this.props.match.params.page)) {\r\n        return (\r\n          <div key={index} className=\"page-item active\">\r\n            <div className=\"page-link\">{page}</div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <Link\r\n            key={index}\r\n            to={`/search-movie/${this.props.match.params.keyword}/${page}`}\r\n          >\r\n            <div className=\"page-item\">\r\n              <div className=\"page-link\">{page}</div>\r\n            </div>\r\n          </Link>\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let pageMax;\r\n    const totalResult = this.state.searchResult.totalResults;\r\n    if (totalResult % 10 === 0) {\r\n      pageMax = Math.floor(totalResult / 10);\r\n    } else {\r\n      pageMax = Math.floor(totalResult / 10) + 1;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <SearchMovie updateResult={this.updateSearchResult} server={server} />\r\n        <div className=\"container-fluid\">\r\n          {this.isLoading()}\r\n\r\n          <div className=\"d-flex justify-content-center mt-5\">\r\n            <ul className=\"pagination\">\r\n              <Link to={`/search-movie/${this.props.match.params.keyword}/1`}>\r\n                <div className=\"page-item\">\r\n                  <div className=\"page-link\">\r\n                    <span aria-hidden=\"true\">&laquo;</span>\r\n                    <span className=\"sr-only\">Previous</span>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n              {this.pageButton()}\r\n              <Link\r\n                to={`/search-movie/${this.props.match.params.keyword}/${pageMax}`}\r\n              >\r\n                <div className=\"page-item\">\r\n                  <div className=\"page-link\">\r\n                    <span aria-hidden=\"true\">&raquo;</span>\r\n                    <span className=\"sr-only\">Next</span>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}