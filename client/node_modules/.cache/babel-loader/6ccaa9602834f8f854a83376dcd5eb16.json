{"ast":null,"code":"var _jsxFileName = \"E:\\\\portfolio2\\\\client\\\\src\\\\components\\\\wall-component\\\\Wall-Post.js\";\nimport Axios from \"axios\";\nimport React from \"react\";\nimport EditPost from \"./Edit-post-page\";\nimport svg from \"../svg-sources\";\nimport { TimelineLite } from \"gsap/all\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport ReplyForm from \"./Reply-form\";\nimport UpvoteDownvote from \"./Upvote-Downvote\";\nexport default class Post extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.CommentTriggerButton = () => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-auto p-0\",\n        type: \"button\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": `#id${this.props.posts._id}`,\n        \"aria-expanded\": \"false\",\n        \"aria-controls\": \"comment-form\",\n        id: \"comment-button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 9\n        }\n      }, svg.comment));\n    };\n\n    this.notify = (isError, alert) => {\n      const options = {\n        position: \"top-center\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined\n      };\n      isError ? toast.error(`${alert}`, options) : toast.success(`${alert}`, options);\n    };\n\n    this.EditDeletePostOption = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dropdown float-right\",\n        id: \"edit-btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 7\n        }\n      }, svg.options, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dropdown-menu dropdown-menu-right\",\n        \"aria-labelledby\": \"dropdownMenuButton\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(EditPost, {\n        postID: this.props.posts._id,\n        post: this.props.posts.post,\n        server: this.props.server,\n        className: \"dropdown-item\",\n        notify: this.notify,\n        postList: this.props.postList,\n        myPostList: this.props.myPostList,\n        updatePostList: this.props.updatePostList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"dropdown-item\",\n        onClick: () => {\n          this.deletePost(this.props.posts._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }\n      }, \"Delete\")));\n    };\n\n    this.CommentPostSection = () => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"px-1 mb-3 ml-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ReplyForm, {\n        server: this.props.server,\n        post: this.props.posts,\n        postList: this.props.postList,\n        myPostList: this.props.myPostList,\n        updatePostList: this.props.updatePostList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        id: \"divider\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 9\n        }\n      }, this.props.posts.reply.map(replyObj => {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"comment-box px-3 mb-2\",\n          key: Math.random(),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"card-body\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"media\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: this.props.picture(),\n          className: \"mr-3\",\n          alt: \"...\",\n          width: \"80\",\n          height: \"80\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"media-body\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"h6\", {\n          className: \"card-title mb-0 pb-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 23\n          }\n        }, replyObj.userName, \" replied:\"), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-sm-left mb-1\",\n          id: \"date\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 23\n          }\n        }, \"posted: \", replyObj.postedDate), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"text-left reply-content p-3 mb-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 23\n          }\n        }, replyObj.replyText)))));\n      })));\n    };\n\n    this.MainPost = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"post-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card w-75 mx-auto\",\n        id: \"post-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body mb-1 pb-1 border-bottom\",\n        id: \"post-cont\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"media\",\n        id: \"post-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: this.props.picture(),\n        height: \"140\",\n        width: \"140\",\n        className: \"mr-3\",\n        alt: \"...\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"media-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container h-auto pb-0 mx-0 px-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"h-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"float-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }\n      }, this.EditDeletePostOption()), /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"card-title h-auto mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 21\n        }\n      }, this.props.posts.userName))), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-sm-left mb-1\",\n        id: \"date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, \"posted: \", this.props.posts.dateCreated), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-left post-content p-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }, this.props.posts.post), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        id: \"replyGroup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 19\n        }\n      }, this.CommentTriggerButton(), /*#__PURE__*/React.createElement(UpvoteDownvote, {\n        post: this.props.posts,\n        server: this.props.server,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 21\n        }\n      })))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"collapse px-5  mt-2\",\n        id: `id${this.props.posts._id}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, this.CommentPostSection()), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }\n      })));\n    };\n\n    this.cards = [];\n    this.tl = new TimelineLite({\n      paused: true\n    });\n    this.state = {\n      alert: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.tl.staggerTo(this.cards, 1, {\n      autoAlpha: 1,\n      y: 10\n    }, 1).play();\n  }\n\n  deletePost(post_id) {\n    axios.delete(`${this.props.server}/deletepost/${post_id}`).then(res => {\n      let isError = res.data.error;\n\n      if (isError) {\n        this.notify(isError, isError);\n      } else {\n        this.notify(isError, \"Post Deleted\");\n        const postList = this.props.postList;\n        const myPostList = this.props.myPostList;\n        console.log(this.props.myPostList);\n        const postListDeleted = postList.findIndex(el => {\n          return el._id === post_id;\n        });\n        console.log(this.props.myPostList);\n        const myPostListDeleted = myPostList.findIndex(el => {\n          return el._id === post_id;\n        });\n        postList.splice(postListDeleted, 1);\n        console.log(postList);\n        myPostList.splice(myPostListDeleted, 1);\n        this.props.updatePostList(postList, myPostList);\n      }\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(this.MainPost, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["E:/portfolio2/client/src/components/wall-component/Wall-Post.js"],"names":["Axios","React","EditPost","svg","TimelineLite","toast","axios","ReplyForm","UpvoteDownvote","Post","Component","constructor","props","CommentTriggerButton","posts","_id","comment","notify","isError","alert","options","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","error","success","EditDeletePostOption","post","server","postList","myPostList","updatePostList","deletePost","CommentPostSection","reply","map","replyObj","Math","random","picture","userName","postedDate","replyText","MainPost","dateCreated","cards","tl","paused","state","componentDidMount","staggerTo","autoAlpha","y","play","post_id","delete","then","res","data","console","log","postListDeleted","findIndex","el","myPostListDeleted","splice","catch","err","render"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport React from \"react\";\r\nimport EditPost from \"./Edit-post-page\";\r\nimport svg from \"../svg-sources\";\r\nimport { TimelineLite } from \"gsap/all\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\nimport ReplyForm from \"./Reply-form\";\r\nimport UpvoteDownvote from \"./Upvote-Downvote\";\r\n\r\nexport default class Post extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.cards = [];\r\n    this.tl = new TimelineLite({ paused: true });\r\n\r\n    this.state = {\r\n      alert: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.tl.staggerTo(this.cards, 1, { autoAlpha: 1, y: 10 }, 1).play();\r\n  }\r\n\r\n  CommentTriggerButton = () => {\r\n    return (\r\n      <>\r\n        <div\r\n          className=\"col-md-auto p-0\"\r\n          type=\"button\"\r\n          data-toggle=\"collapse\"\r\n          data-target={`#id${this.props.posts._id}`}\r\n          aria-expanded=\"false\"\r\n          aria-controls=\"comment-form\"\r\n          id=\"comment-button\"\r\n        >\r\n          {svg.comment}\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  deletePost(post_id) {\r\n    axios\r\n      .delete(`${this.props.server}/deletepost/${post_id}`)\r\n      .then((res) => {\r\n        let isError = res.data.error;\r\n        if (isError) {\r\n          this.notify(isError, isError);\r\n        } else {\r\n          this.notify(isError, \"Post Deleted\");\r\n          const postList = this.props.postList;\r\n          const myPostList = this.props.myPostList;\r\n          console.log(this.props.myPostList);\r\n          const postListDeleted = postList.findIndex((el) => {\r\n            return el._id === post_id;\r\n          });\r\n          console.log(this.props.myPostList);\r\n          const myPostListDeleted = myPostList.findIndex((el) => {\r\n            return el._id === post_id;\r\n          });\r\n          postList.splice(postListDeleted, 1);\r\n          console.log(postList);\r\n          myPostList.splice(myPostListDeleted, 1);\r\n          this.props.updatePostList(postList, myPostList);\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  notify = (isError, alert) => {\r\n    const options = {\r\n      position: \"top-center\",\r\n      autoClose: 5000,\r\n      hideProgressBar: false,\r\n      closeOnClick: true,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      progress: undefined,\r\n    };\r\n\r\n    isError\r\n      ? toast.error(`${alert}`, options)\r\n      : toast.success(`${alert}`, options);\r\n  };\r\n\r\n  EditDeletePostOption = () => {\r\n    return (\r\n      <div className=\"dropdown float-right\" id=\"edit-btn\">\r\n        {svg.options}\r\n\r\n        <div\r\n          className=\"dropdown-menu dropdown-menu-right\"\r\n          aria-labelledby=\"dropdownMenuButton\"\r\n        >\r\n          <EditPost\r\n            postID={this.props.posts._id}\r\n            post={this.props.posts.post}\r\n            server={this.props.server}\r\n            className=\"dropdown-item\"\r\n            notify={this.notify}\r\n            postList={this.props.postList}\r\n            myPostList={this.props.myPostList}\r\n            updatePostList={this.props.updatePostList}\r\n          />\r\n          <button\r\n            className=\"dropdown-item\"\r\n            onClick={() => {\r\n              this.deletePost(this.props.posts._id);\r\n            }}\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  CommentPostSection = () => {\r\n    return (\r\n      <>\r\n        <div className=\"px-1 mb-3 ml-3\">\r\n          <ReplyForm\r\n            server={this.props.server}\r\n            post={this.props.posts}\r\n            postList={this.props.postList}\r\n            myPostList={this.props.myPostList}\r\n            updatePostList={this.props.updatePostList}\r\n          />\r\n        </div>\r\n        <div id=\"divider\"></div>\r\n        <div>\r\n          {this.props.posts.reply.map((replyObj) => {\r\n            return (\r\n              <div className=\"comment-box px-3 mb-2\" key={Math.random()}>\r\n                <div className=\"card-body\">\r\n                  <div className=\"media\">\r\n                    <img\r\n                      src={this.props.picture()}\r\n                      className=\"mr-3\"\r\n                      alt=\"...\"\r\n                      width=\"80\"\r\n                      height=\"80\"\r\n                    />\r\n                    <div className=\"media-body\">\r\n                      <h6 className=\"card-title mb-0 pb-0\">\r\n                        {replyObj.userName} replied:\r\n                      </h6>\r\n                      <p className=\"text-sm-left mb-1\" id=\"date\">\r\n                        posted: {replyObj.postedDate}\r\n                      </p>\r\n                      <p className=\"text-left reply-content p-3 mb-0\">\r\n                        {replyObj.replyText}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n\r\n  MainPost = () => {\r\n    return (\r\n      <div className=\"post-box\">\r\n        <br></br>\r\n        <div className=\"card w-75 mx-auto\" id=\"post-box\">\r\n          <div className=\"card-body mb-1 pb-1 border-bottom\" id=\"post-cont\">\r\n            <div className=\"media\" id=\"post-box\">\r\n              <img\r\n                src={this.props.picture()}\r\n                height=\"140\"\r\n                width=\"140\"\r\n                className=\"mr-3\"\r\n                alt=\"...\"\r\n              />\r\n              <div className=\"media-body\">\r\n                <div className=\"container h-auto pb-0 mx-0 px-0\">\r\n                  <div className=\"h-auto\">\r\n                    <div className=\"float-right\">\r\n                      {this.EditDeletePostOption()}\r\n                    </div>\r\n                    <h5 className=\"card-title h-auto mb-0\">\r\n                      {this.props.posts.userName}\r\n                    </h5>\r\n                  </div>\r\n                </div>\r\n                <p className=\"text-sm-left mb-1\" id=\"date\">\r\n                  posted: {this.props.posts.dateCreated}\r\n                </p>\r\n                <p className=\"text-left post-content p-3\">\r\n                  {this.props.posts.post}\r\n                </p>\r\n                <div className=\"container mb-3\">\r\n                  <div className=\"row\" id=\"replyGroup\">\r\n                    {this.CommentTriggerButton()}\r\n                    <UpvoteDownvote\r\n                      post={this.props.posts}\r\n                      server={this.props.server}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"collapse px-5  mt-2\" id={`id${this.props.posts._id}`}>\r\n            {this.CommentPostSection()}\r\n          </div>\r\n          <div className=\"\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <this.MainPost />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}