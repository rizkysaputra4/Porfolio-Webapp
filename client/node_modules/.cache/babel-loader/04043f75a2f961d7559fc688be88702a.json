{"ast":null,"code":"import _slicedToArray from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import axios from\"axios\";import{Modal,Button,Form}from\"react-bootstrap\";var EditPost=/*#__PURE__*/function(_React$Component){_inherits(EditPost,_React$Component);var _super=_createSuper(EditPost);function EditPost(props){var _this;_classCallCheck(this,EditPost);_this=_super.call(this,props);_this.EditPostModal=function(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),show=_React$useState2[0],setShow=_React$useState2[1];var handleClose=function handleClose(){return setShow(false);};var handleShow=function handleShow(){return setShow(true);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"dropdown-item\",onClick:handleShow},\"Edit\"),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",backdrop:\"static\",keyboard:false,show:show,onHide:handleClose,centered:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(Modal.Title,null,\"Edit Post\"))),/*#__PURE__*/React.createElement(Modal.Body,null,_this.editPostForm())));};_this.onChangeUpdatePost=_this.onChangeUpdatePost.bind(_assertThisInitialized(_this));_this.onSubmitUpdatePost=_this.onSubmitUpdatePost.bind(_assertThisInitialized(_this));_this.editPostForm=_this.editPostForm.bind(_assertThisInitialized(_this));_this.state={updateTextPost:\"\"};return _this;}_createClass(EditPost,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"\".concat(this.props.server,\"/get/\").concat(this.props.postID)).then(function(post){_this2.setState({updateTextPost:post.data.post});}).catch(function(err){return console.log(err);});}},{key:\"onChangeUpdatePost\",value:function onChangeUpdatePost(e){this.setState({updateTextPost:e.target.value});}},{key:\"onSubmitUpdatePost\",value:function onSubmitUpdatePost(e){var _this3=this;e.preventDefault();var post={post:this.state.updateTextPost,withCredentials:true};axios.post(\"\".concat(this.props.server,\"/updatePost/\").concat(this.props.postID),post).then(function(res){console.log(res.data);res.data.error?_this3.props.notify(res.data.error,res.data.error):_this3.props.notify(res.data.error,\"Edited\");}).catch(function(err){return console.log(err);});this.setState({updateTextPost:\"\"});window.location.reload();}},{key:\"editPostForm\",value:function editPostForm(){var _this4=this;return/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return _this4.onSubmitUpdatePost(e);}},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlTextarea1\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:5,value:this.state.updateTextPost,onChange:this.onChangeUpdatePost})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(Button,{className:\"mx-auto\",type:\"submit\"},\"Edit\")));}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(this.EditPostModal,null));}}]);return EditPost;}(React.Component);export{EditPost as default};","map":{"version":3,"sources":["E:/portfolio2/client/src/components/wall-component/Edit-post-page.js"],"names":["React","axios","Modal","Button","Form","EditPost","props","EditPostModal","useState","show","setShow","handleClose","handleShow","editPostForm","onChangeUpdatePost","bind","onSubmitUpdatePost","state","updateTextPost","get","server","postID","then","post","setState","data","catch","err","console","log","e","target","value","preventDefault","withCredentials","res","error","notify","window","location","reload","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal, Button, Form } from \"react-bootstrap\";\r\n\r\nexport default class EditPost extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.onChangeUpdatePost = this.onChangeUpdatePost.bind(this);\r\n    this.onSubmitUpdatePost = this.onSubmitUpdatePost.bind(this);\r\n    this.editPostForm = this.editPostForm.bind(this);\r\n\r\n    this.state = {\r\n      updateTextPost: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(`${this.props.server}/get/${this.props.postID}`)\r\n      .then((post) => {\r\n        this.setState({ updateTextPost: post.data.post });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  onChangeUpdatePost(e) {\r\n    this.setState({\r\n      updateTextPost: e.target.value,\r\n    });\r\n  }\r\n\r\n  onSubmitUpdatePost(e) {\r\n    e.preventDefault();\r\n    const post = {\r\n      post: this.state.updateTextPost,\r\n      withCredentials: true,\r\n    };\r\n\r\n    axios\r\n      .post(`${this.props.server}/updatePost/${this.props.postID}`, post)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        res.data.error\r\n          ? this.props.notify(res.data.error, res.data.error)\r\n          : this.props.notify(res.data.error, \"Edited\");\r\n      })\r\n      .catch((err) => console.log(err));\r\n\r\n    this.setState({\r\n      updateTextPost: \"\",\r\n    });\r\n\r\n    window.location.reload();\r\n  }\r\n\r\n  editPostForm() {\r\n    return (\r\n      <Form onSubmit={(e) => this.onSubmitUpdatePost(e)}>\r\n        <Form.Group controlId=\"exampleForm.ControlTextarea1\">\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            rows={5}\r\n            value={this.state.updateTextPost}\r\n            onChange={this.onChangeUpdatePost}\r\n          />\r\n        </Form.Group>\r\n\r\n        <div className=\"w-100 d-flex justify-content-center\">\r\n          <Button className=\"mx-auto\" type=\"submit\">\r\n            Edit\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    );\r\n  }\r\n\r\n  EditPostModal = () => {\r\n    const [show, setShow] = React.useState(false);\r\n\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    return (\r\n      <>\r\n        <button className=\"dropdown-item\" onClick={handleShow}>\r\n          Edit\r\n        </button>\r\n\r\n        <Modal\r\n          size=\"lg\"\r\n          backdrop=\"static\"\r\n          keyboard={false}\r\n          show={show}\r\n          onHide={handleClose}\r\n          centered\r\n        >\r\n          <Modal.Header closeButton>\r\n            <div className=\"w-100 d-flex justify-content-center\">\r\n              <Modal.Title>Edit Post</Modal.Title>\r\n            </div>\r\n          </Modal.Header>\r\n          <Modal.Body>{this.editPostForm()}</Modal.Body>\r\n        </Modal>\r\n      </>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <this.EditPostModal />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}