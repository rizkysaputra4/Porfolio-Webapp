{"ast":null,"code":"import _classCallCheck from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\portfolio2\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import axios from\"axios\";import{Modal,Button,Form}from\"react-bootstrap\";var EditPost=/*#__PURE__*/function(_React$Component){_inherits(EditPost,_React$Component);var _super=_createSuper(EditPost);function EditPost(props){var _this;_classCallCheck(this,EditPost);_this=_super.call(this,props);_this.handleCloseModal=function(){_this.setState({show:false});};_this.handleShowModal=function(){_this.setState({show:true});};_this.EditPostModal=function(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{className:\"dropdown-item\",onClick:function onClick(){return _this.handleShowModal();}},\"Edit\"),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",backdrop:\"static\",keyboard:false,show:_this.state.show,onHide:function onHide(){return _this.handleCloseModal();},centered:true},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(Modal.Title,null,\"Edit Post\"))),/*#__PURE__*/React.createElement(Modal.Body,null,_this.editPostForm())));};_this.onChangeUpdatePost=_this.onChangeUpdatePost.bind(_assertThisInitialized(_this));_this.onSubmitUpdatePost=_this.onSubmitUpdatePost.bind(_assertThisInitialized(_this));_this.editPostForm=_this.editPostForm.bind(_assertThisInitialized(_this));_this.state={textPost:\"\",updateTextPost:\"\",show:false};return _this;}_createClass(EditPost,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){this.setState({textPost:nextProps.post,updateTextPost:nextProps.post});}},{key:\"onChangeUpdatePost\",value:function onChangeUpdatePost(e){this.setState({updateTextPost:e.target.value});}},{key:\"onSubmitUpdatePost\",value:function onSubmitUpdatePost(e){var _this2=this;e.preventDefault();var post={post:this.state.updateTextPost,withCredentials:true};axios.post(\"\".concat(this.props.server,\"/updatePost/\").concat(this.props.postID),post).then(function(res){console.log(res.data);if(res.data.error){_this2.setState({updateTextPost:_this2.state.textPost});_this2.props.notify(res.data.error,res.data.error);}else{_this2.props.notify(res.data.error,\"Edited\");_this2.handleCloseModal();var postIndex=_this2.props.postList.findIndex(function(el){return el._id===_this2.props.postID;});var postList=_this2.props.postList;var myPostList=_this2.props.myPostList;var updatePostList=_this2.props.updatePostList;postList[postIndex].post=post.post;if(myPostList){var myPostIndex=_this2.props.myPostList.findIndex(function(el){return el._id===_this2.props.postID;});myPostList[myPostIndex].post=post.post;updatePostList(postList,myPostList);}else{updatePostList(postList);}}}).catch(function(err){return console.log(err);});}},{key:\"editPostForm\",value:function editPostForm(){var _this3=this;return/*#__PURE__*/React.createElement(Form,{onSubmit:function onSubmit(e){return _this3.onSubmitUpdatePost(e);}},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"exampleForm.ControlTextarea1\"},/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:5,value:this.state.updateTextPost,onChange:this.onChangeUpdatePost})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(Button,{className:\"mx-auto\",type:\"submit\"},\"Edit\")));}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(this.EditPostModal,null));}}]);return EditPost;}(React.Component);export{EditPost as default};","map":{"version":3,"sources":["E:/portfolio2/client/src/components/wall-component/Edit-post-page.js"],"names":["React","axios","Modal","Button","Form","EditPost","props","handleCloseModal","setState","show","handleShowModal","EditPostModal","state","editPostForm","onChangeUpdatePost","bind","onSubmitUpdatePost","textPost","updateTextPost","nextProps","post","e","target","value","preventDefault","withCredentials","server","postID","then","res","console","log","data","error","notify","postIndex","postList","findIndex","el","_id","myPostList","updatePostList","myPostIndex","catch","err","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { Modal, Button, Form } from \"react-bootstrap\";\r\n\r\nexport default class EditPost extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.onChangeUpdatePost = this.onChangeUpdatePost.bind(this);\r\n    this.onSubmitUpdatePost = this.onSubmitUpdatePost.bind(this);\r\n    this.editPostForm = this.editPostForm.bind(this);\r\n\r\n    this.state = {\r\n      textPost: \"\",\r\n      updateTextPost: \"\",\r\n      show: false,\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.setState({ textPost: nextProps.post, updateTextPost: nextProps.post });\r\n  }\r\n\r\n  onChangeUpdatePost(e) {\r\n    this.setState({\r\n      updateTextPost: e.target.value,\r\n    });\r\n  }\r\n\r\n  onSubmitUpdatePost(e) {\r\n    e.preventDefault();\r\n    const post = {\r\n      post: this.state.updateTextPost,\r\n      withCredentials: true,\r\n    };\r\n\r\n    axios\r\n      .post(`${this.props.server}/updatePost/${this.props.postID}`, post)\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        if (res.data.error) {\r\n          this.setState({\r\n            updateTextPost: this.state.textPost,\r\n          });\r\n          this.props.notify(res.data.error, res.data.error);\r\n        } else {\r\n          this.props.notify(res.data.error, \"Edited\");\r\n          this.handleCloseModal();\r\n\r\n          const postIndex = this.props.postList.findIndex((el) => {\r\n            return el._id === this.props.postID;\r\n          });\r\n\r\n          const postList = this.props.postList;\r\n          const myPostList = this.props.myPostList;\r\n          const updatePostList = this.props.updatePostList;\r\n          postList[postIndex].post = post.post;\r\n\r\n          if (myPostList) {\r\n            const myPostIndex = this.props.myPostList.findIndex((el) => {\r\n              return el._id === this.props.postID;\r\n            });\r\n            myPostList[myPostIndex].post = post.post;\r\n            updatePostList(postList, myPostList);\r\n          } else {\r\n            updatePostList(postList);\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  editPostForm() {\r\n    return (\r\n      <Form onSubmit={(e) => this.onSubmitUpdatePost(e)}>\r\n        <Form.Group controlId=\"exampleForm.ControlTextarea1\">\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            rows={5}\r\n            value={this.state.updateTextPost}\r\n            onChange={this.onChangeUpdatePost}\r\n          />\r\n        </Form.Group>\r\n\r\n        <div className=\"w-100 d-flex justify-content-center\">\r\n          <Button className=\"mx-auto\" type=\"submit\">\r\n            Edit\r\n          </Button>\r\n        </div>\r\n      </Form>\r\n    );\r\n  }\r\n\r\n  handleCloseModal = () => {\r\n    this.setState({ show: false });\r\n  };\r\n\r\n  handleShowModal = () => {\r\n    this.setState({ show: true });\r\n  };\r\n\r\n  EditPostModal = () => {\r\n    return (\r\n      <>\r\n        <button\r\n          className=\"dropdown-item\"\r\n          onClick={() => this.handleShowModal()}\r\n        >\r\n          Edit\r\n        </button>\r\n\r\n        <Modal\r\n          size=\"lg\"\r\n          backdrop=\"static\"\r\n          keyboard={false}\r\n          show={this.state.show}\r\n          onHide={() => this.handleCloseModal()}\r\n          centered\r\n        >\r\n          <Modal.Header closeButton>\r\n            <div className=\"w-100 d-flex justify-content-center\">\r\n              <Modal.Title>Edit Post</Modal.Title>\r\n            </div>\r\n          </Modal.Header>\r\n          <Modal.Body>{this.editPostForm()}</Modal.Body>\r\n        </Modal>\r\n      </>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <this.EditPostModal />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}